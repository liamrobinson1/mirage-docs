
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "gallery/07-observer/az_el_parallel.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_gallery_07-observer_az_el_parallel.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_gallery_07-observer_az_el_parallel.py:


Azimuth/Elevation Conversion
============================

Given a station and a target in inertial space we can compute the azimuth and elevation of the object, or invert an azimuth and elevation into a new look direction

.. GENERATED FROM PYTHON SOURCE LINES 7-13

.. code-block:: default


    import pyspaceaware as ps
    import numpy as np
    import pyvista as pv
    import matplotlib.pyplot as plt








.. GENERATED FROM PYTHON SOURCE LINES 14-15

Let's use the Purdue Optical Ground Station for this example

.. GENERATED FROM PYTHON SOURCE LINES 15-18

.. code-block:: default

    station = ps.Station(preset="pogs")
    dates = ps.date_linspace(ps.now(), ps.now() + ps.days(1), int(1e4)) + ps.hours(12)








.. GENERATED FROM PYTHON SOURCE LINES 19-20

Let's extract the station's position in J2000 and create an ECI look direction which is just outwards and down towards the equator

.. GENERATED FROM PYTHON SOURCE LINES 20-28

.. code-block:: default

    station_j2k = station.j2000_at_dates(dates)

    eci_pos = station_j2k * 2
    eci_pos[:, -1] = 0

    target_dir_eci = ps.hat(eci_pos - station_j2k)









.. GENERATED FROM PYTHON SOURCE LINES 29-30

We can then turn this target direction into an azimuth/elevation pair

.. GENERATED FROM PYTHON SOURCE LINES 30-34

.. code-block:: default

    az, el = station.eci_to_az_el(dates, target_dir_eci)
    print(f"{az[0]=} [rad]")
    print(f"{el[0]=} [rad]")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    az[0]=3.1442657991158502 [rad]
    el[0]=0.4292312390092236 [rad]




.. GENERATED FROM PYTHON SOURCE LINES 35-36

And easily invert that into the same unit vector direction

.. GENERATED FROM PYTHON SOURCE LINES 36-41

.. code-block:: default

    eci_hat = station.az_el_to_eci(az, el, dates)
    print(
        f"ECI vector reconstruction error: {np.linalg.norm(target_dir_eci[0,:] - eci_hat[0,:])}"
    )





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    ECI vector reconstruction error: 4.0125770192081414e-16




.. GENERATED FROM PYTHON SOURCE LINES 42-43

We can also display this resulting unit vector as a ray cast out from the observer, hitting the target

.. GENERATED FROM PYTHON SOURCE LINES 43-64

.. code-block:: default

    s = 10
    pl = pv.Plotter()
    stat_origin0 = station.j2000_at_dates(dates[0])
    ps.plot_earth(pl, date=dates[0], high_def=True, atmosphere=False, borders=True)
    rotm = ps.EarthFixedFrame("itrf", "j2000").rotms_at_dates(dates[0]) @ ps.enu_to_ecef(
        station.itrf
    )
    ps.plot_basis(
        pl, rotm, labels=["E", "N", "U"], origin=stat_origin0, scale=s * 100, color="linen"
    )
    ps.plot_arrow(
        pl,
        origin=stat_origin0,
        direction=eci_hat[0, :],
        scale=s * 100,
        color="c",
        label="To object",
    )
    pl.camera.focal_point = stat_origin0
    pl.camera.position = pl.camera.focal_point + s * np.array([300, 400, -200])
    pl.show()



.. image-sg:: /gallery/07-observer/images/sphx_glr_az_el_parallel_001.png
   :alt: az el parallel
   :srcset: /gallery/07-observer/images/sphx_glr_az_el_parallel_001.png
   :class: sphx-glr-single-img






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  11.794 seconds)


.. _sphx_glr_download_gallery_07-observer_az_el_parallel.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example




    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: az_el_parallel.py <az_el_parallel.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: az_el_parallel.ipynb <az_el_parallel.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
