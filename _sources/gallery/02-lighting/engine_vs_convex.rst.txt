
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "gallery/02-lighting/engine_vs_convex.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_gallery_02-lighting_engine_vs_convex.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_gallery_02-lighting_engine_vs_convex.py:


Convex vs Engine Light Curves
=============================

Comparing light curves produced by the LightCurveEngine renderer and a simplified convex method

.. GENERATED FROM PYTHON SOURCE LINES 7-17

.. code-block:: default



    import sys

    sys.path.append("./src")
    import numpy as np
    import pyspaceaware as ps
    import matplotlib.pyplot as plt
    import seaborn as sns








.. GENERATED FROM PYTHON SOURCE LINES 18-19

Defining the object and BRDF

.. GENERATED FROM PYTHON SOURCE LINES 19-22

.. code-block:: default

    obj = ps.SpaceObject("cube.obj")
    brdf = ps.Brdf("phong", cd=0.5, cs=0.5, n=10)








.. GENERATED FROM PYTHON SOURCE LINES 23-24

Defining the attitude profile

.. GENERATED FROM PYTHON SOURCE LINES 24-37

.. code-block:: default


    t_eval = np.linspace(0, 10, 1000)
    q, _ = ps.propagate_attitude_torque_free(
        np.array([0.0, 0.0, 0.0, 1.0]),
        np.array([1.0, 1.0, 1.0]),
        np.diag([1, 2, 3]),
        t_eval,
    )

    dcm = ps.quat_to_dcm(q)
    ovb = ps.stack_mat_mult(dcm, np.array([[1, 0, 0]]))
    svb = ps.stack_mat_mult(dcm, np.array([[0, 1, 0]]))








.. GENERATED FROM PYTHON SOURCE LINES 38-39

We can now run the engine and compute a convex light curve:

.. GENERATED FROM PYTHON SOURCE LINES 39-45

.. code-block:: default


    b_non_convex = ps.run_engine(
        brdf, obj.file_name, svb, ovb, instance_count=1
    )
    b_convex = obj.compute_convex_light_curve(brdf, svb, ovb)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Running Light Curve Engine: 
    /Users/liamrobinson/Documents/PyLightCurves/src/pyspaceaware/ctools/engine/LightCurveEngine -m /Users/liamrobinson/Documents/PyLightCurves/src/pyspaceaware/resources/models/cube.obj -i 1 -c 1000 -r light_curve0.lcr -x /Users/liamrobinson/Documents/PyLightCurves/examples/02-lighting/out  -b 1 -D 0.5 -S 0.5 -N 10





.. GENERATED FROM PYTHON SOURCE LINES 46-47

And plot the results

.. GENERATED FROM PYTHON SOURCE LINES 47-58

.. code-block:: default


    plt.figure()
    sns.lineplot(x=t_eval, y=b_non_convex, errorbar=None)
    sns.lineplot(x=t_eval, y=b_convex, errorbar=None)
    plt.title(f"Light Curves for {obj.file_name}")
    plt.xlabel("Time [s]")
    plt.ylabel("Normalized brightness")
    plt.legend(["LightCurveEngine", "Convex"])
    plt.grid()
    plt.show()




.. image-sg:: /gallery/02-lighting/images/sphx_glr_engine_vs_convex_001.png
   :alt: Light Curves for cube.obj
   :srcset: /gallery/02-lighting/images/sphx_glr_engine_vs_convex_001.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 59-60

Plotting the error instead of the brightness values

.. GENERATED FROM PYTHON SOURCE LINES 60-69

.. code-block:: default


    plt.figure()
    sns.lineplot(x=t_eval, y=b_non_convex - b_convex, errorbar=None)
    plt.title(f"Light Curves Error for {obj.file_name}")
    plt.xlabel("Time [s]")
    plt.ylabel("Normalized brightness error")
    plt.grid()
    plt.show()




.. image-sg:: /gallery/02-lighting/images/sphx_glr_engine_vs_convex_002.png
   :alt: Light Curves Error for cube.obj
   :srcset: /gallery/02-lighting/images/sphx_glr_engine_vs_convex_002.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 70-71

This is nice and small, which we like to see. If we repeat this process for a non-convex object, the error quickly becomes clear

.. GENERATED FROM PYTHON SOURCE LINES 71-90

.. code-block:: default


    obj = ps.SpaceObject("tess.obj")
    brdf = ps.Brdf("phong", cd=0.5, cs=0.5, n=10)

    b_non_convex = ps.run_engine(
        brdf, obj.file_name, svb, ovb, instance_count=1
    )
    b_convex = obj.compute_convex_light_curve(brdf, svb, ovb)


    plt.figure()
    sns.lineplot(x=t_eval, y=b_non_convex, errorbar=None)
    sns.lineplot(x=t_eval, y=b_convex, errorbar=None)
    plt.title(f"Light Curves for {obj.file_name}")
    plt.xlabel("Time [s]")
    plt.ylabel("Normalized brightness")
    plt.legend(["LightCurveEngine", "Convex"])
    plt.grid()
    plt.show()



.. image-sg:: /gallery/02-lighting/images/sphx_glr_engine_vs_convex_003.png
   :alt: Light Curves for tess.obj
   :srcset: /gallery/02-lighting/images/sphx_glr_engine_vs_convex_003.png
   :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Running Light Curve Engine: 
    /Users/liamrobinson/Documents/PyLightCurves/src/pyspaceaware/ctools/engine/LightCurveEngine -m /Users/liamrobinson/Documents/PyLightCurves/src/pyspaceaware/resources/models/tess.obj -i 1 -c 1000 -r light_curve0.lcr -x /Users/liamrobinson/Documents/PyLightCurves/examples/02-lighting/out  -b 1 -D 0.5 -S 0.5 -N 10






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  9.797 seconds)


.. _sphx_glr_download_gallery_02-lighting_engine_vs_convex.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example




    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: engine_vs_convex.py <engine_vs_convex.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: engine_vs_convex.ipynb <engine_vs_convex.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
