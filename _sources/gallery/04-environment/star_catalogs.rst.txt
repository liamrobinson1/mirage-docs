
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "gallery/04-environment/star_catalogs.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_gallery_04-environment_star_catalogs.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_gallery_04-environment_star_catalogs.py:


Star Catalogs
=============

Initializing and querying star catalogs

.. GENERATED FROM PYTHON SOURCE LINES 7-41

.. code-block:: Python


    import matplotlib.pyplot as plt
    import numpy as np
    import seaborn as sns

    import mirage as mr
    import mirage.vis as mrv

    station = mr.Station()
    date = mr.now()
    mr.tic("Loading Gaia")
    gaia = mr.StarCatalog("gaia", station, date)
    mr.toc()

    mr.tic("Loading Tycho-2")
    tycho2 = mr.StarCatalog("tycho2", station, date)
    mr.toc()

    eci_look_dir = mr.hat(np.array([1, 1, 0]))
    look_ra, look_dec = mr.eci_to_ra_dec(eci_look_dir)
    scope_up_initial = np.array([0, 1, 0])
    telescope = mr.Telescope(preset="pogs")
    mr.tic("Finding stars in frame for Tycho-2")
    if_uvs_tycho2, if_mags_tycho2 = tycho2.in_fov(eci_look_dir, scope_up_initial)
    mr.toc()

    print(f"Tycho-2 found {if_uvs_tycho2.shape[0]} stars in frame")

    mr.tic("Finding stars in frame for Gaia")
    if_uvs_gaia, if_mags_gaia = gaia.in_fov(eci_look_dir, scope_up_initial)
    mr.toc()

    print(f"Gaia found {if_uvs_gaia.shape[0]} stars in frame")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Loading Gaia: 1.84e+00 seconds
    Loading Tycho-2: 2.55e-01 seconds
    Finding stars in frame for Tycho-2: 3.32e-03 seconds
    Tycho-2 found 17 stars in frame
    Finding stars in frame for Gaia: 6.88e-04 seconds
    Gaia found 79 stars in frame




.. GENERATED FROM PYTHON SOURCE LINES 42-43

Plotting the FOV stars

.. GENERATED FROM PYTHON SOURCE LINES 43-60

.. code-block:: Python

    gaia_pix_x, gaia_pix_y = telescope.j2000_unit_vectors_to_pixels(
        eci_look_dir, scope_up_initial, if_uvs_gaia
    )
    tycho_pix_x, tycho_pix_y = telescope.j2000_unit_vectors_to_pixels(
        eci_look_dir, scope_up_initial, if_uvs_tycho2
    )

    plt.figure()
    plt.scatter(gaia_pix_x, gaia_pix_y, s=2 * if_mags_gaia, c="black")
    plt.scatter(tycho_pix_x, tycho_pix_y, s=if_mags_tycho2 / 10, c="cyan")
    plt.title("Tycho-2 vs Gaia up close")
    plt.xlabel("RA (pixels)")
    plt.ylabel("Dec (pixels)")
    plt.gca().set_aspect("equal")
    plt.legend(["Gaia", "Tycho-2"])
    plt.show()




.. image-sg:: /gallery/04-environment/images/sphx_glr_star_catalogs_001.png
   :alt: Tycho-2 vs Gaia up close
   :srcset: /gallery/04-environment/images/sphx_glr_star_catalogs_001.png, /gallery/04-environment/images/sphx_glr_star_catalogs_001_2_00x.png 2.00x
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 61-62

Plotting a heatmap of the RA/Dec of both catalogs with seaborn

.. GENERATED FROM PYTHON SOURCE LINES 62-98

.. code-block:: Python


    fig, axs = plt.subplots(2, 1, figsize=(8, 8))
    tycho_weights = mr.apparent_magnitude_to_irradiance(tycho2._mags)
    gaia_weights = mr.apparent_magnitude_to_irradiance(gaia._mags)

    sns.histplot(
        x=tycho2._alpha,
        y=tycho2._delta,
        ax=axs[0],
        bins=50,
        cbar=False,
        weights=tycho_weights,
        cbar_kws={"label": "Cummulative irradiance [W/m^2]"},
    )
    axs[0].set_title("Tycho-2")
    axs[0].set_xlabel("RA (rad)")
    axs[0].set_ylabel("Dec (rad)")
    axs[0].set_aspect("equal")

    sns.histplot(
        x=gaia._alpha,
        y=gaia._delta,
        ax=axs[1],
        bins=50,
        cbar=True,
        cbar_kws={"label": "Cummulative irradiance [W/m^2]"},
        weights=gaia_weights,
        cbar_ax=mrv.get_cbar_ax(),
    )
    axs[1].set_title("Gaia")
    axs[1].set_xlabel("RA (rad)")
    axs[1].set_ylabel("Dec (rad)")
    axs[1].set_aspect("equal")

    plt.tight_layout()
    plt.show()



.. image-sg:: /gallery/04-environment/images/sphx_glr_star_catalogs_002.png
   :alt: Tycho-2, Gaia
   :srcset: /gallery/04-environment/images/sphx_glr_star_catalogs_002.png, /gallery/04-environment/images/sphx_glr_star_catalogs_002_2_00x.png 2.00x
   :class: sphx-glr-single-img






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 20.928 seconds)


.. _sphx_glr_download_gallery_04-environment_star_catalogs.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: star_catalogs.ipynb <star_catalogs.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: star_catalogs.py <star_catalogs.py>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
